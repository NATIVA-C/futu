DIF:=EMA(CLOSE,12)-EMA(CLOSE,26);
DEA:=EMA(DIF,9);

MA10:MA(CLOSE,10), COLOR0080FF ,LINETHICK1;
MA20:MA(CLOSE,20), COLORFFAEC9,LINETHICK1;
ANGLEMA10:=ATAN((MA10/REF(MA10,1)-1)*100)*180/3.1416;

M5:MA(CLOSE,5),COLORFF8D1E;
M50:MA(CLOSE,50),COLOR22C57E;
M60:MA(CLOSE,60),COLOR22C57E;
M120:MA(CLOSE,120),COLOR22C57E,LINETHICK2;
M200:MA(CLOSE,200),COLOR22C57E,LINETHICK2;


DIS:=STDP(CLOSE,20);
MID:MA(CLOSE,20),COLORFFAEC9;
UPPER:MID+2*DIS,COLORFFC90E;
LOWER:MID-2*DIS,COLOR0CAEE6;


VAR1:=CROSS(MA10,M5);
VAR2:=CROSS(MA20,M5);
VAR3:=CROSS(MA20,MA10);

COND11:=COUNT(VAR1,7)>=1;
COND22:=COUNT(VAR2,7)>=1;
COND33:=COUNT(VAR3,7)>=1;

COND44:=SLOPE(M5,3)<0;
COND55:=SLOPE(MA10,3)<0;

CONDS:= COND11 AND COND22 AND COND33 AND COND44 AND COND55;
DRAWICON(FILTER(CONDS,7),H*1.003,2);

COND66:=M5>MA10 AND MA10>MA20 AND CROSS(MA10,MA20);
DRAWICON(COND66,L*0.996,1);


DRAWTEXT(CURRBARSCOUNT=5,L*0.997,'D'), COLORFF8D1E, LINETHICK3;
DRAWTEXT(CURRBARSCOUNT=10,L*0.997,'D'), COLOR0080FF, LINETHICK3;
DRAWTEXT(CURRBARSCOUNT=20,L*0.997,'D'), COLORFFAEC9, LINETHICK3;

