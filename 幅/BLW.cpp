A1:=FORCAST(EMA(CLOSE,5),6);
A2:=FORCAST(EMA(CLOSE,8),6);
A3:=FORCAST(EMA(CLOSE,11),6);
A4:=FORCAST(EMA(CLOSE,14),6);
A5:=FORCAST(EMA(CLOSE,17),6);
B:=A1+A2+A3+A4-4*A5;
TOWERC:=EMA(B,2);
FORCAST(EMA(B,3),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,4),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,5),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,6),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,7),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,8),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,9),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,10),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,11),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,12),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,13),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,14),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,15),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,16),6),POINTDOT,COLORGREEN;
FORCAST(EMA(B,17),6),POINTDOT,COLORGREEN;
STICKLINE(TOWERC>=REF(TOWERC,1), TOWERC,REF(TOWERC,1),0.6,0),COLOR0CFAB1;
STICKLINE(TOWERC< REF(TOWERC,1) ,TOWERC,REF(TOWERC,1),0.6,0),COLORRED;
STICKLINE(TOWERC>=REF(TOWERC,1), TOWERC,REF(TOWERC,1),0.4,0),COLOR0CFAB1;
STICKLINE(TOWERC>=REF(TOWERC,1) ,TOWERC,REF(TOWERC,1),0.2,0), COLOR0CFAB1;
STICKLINE(TOWERC>=REF(TOWERC,1), TOWERC,REF(TOWERC,1),0,0),COLOR0CFAB1;
STICKLINE(TOWERC< REF(TOWERC,1) ,TOWERC,REF(TOWERC,1),0.6,0),COLORRED;
STICKLINE(TOWERC< REF(TOWERC,1) ,TOWERC,REF(TOWERC,1),0.4,0),COLORRED;
STICKLINE(TOWERC< REF(TOWERC,1) ,TOWERC,REF(TOWERC,1),0.2,0),COLORRED;
STICKLINE(TOWERC< REF(TOWERC,1) ,TOWERC,REF(TOWERC,1),0.0,0),COLORRED;

FLAG:= TOWERC>=REF(TOWERC,1);
COND1:=FLAG AND NOT (REF(FLAG,1));
PERIOD_COND1:=BARSLAST(REF(COND1,1));

COND2:=CLOSE<REF(CLOSE, PERIOD_COND1+1) AND TOWERC>REF(TOWERC, PERIOD_COND1+1);
COND3:=COND1 AND COND2;
DRAWICON(COND3,TOWERC,4);

AA1:=BACKSET(COND3, PERIOD_COND1+2);
BB1:=FILTER(AA1, PERIOD_COND1+1);
DRAWLINE(BB1,TOWERC,COND3,TOWERC,0),COLORRED,LINETHICK3;